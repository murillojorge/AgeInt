---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const { slug } = Astro.params;
const article = await getCollection('articles').then(articles => {
  return articles.find(article => article.slug === slug);
});

if (!article) {
  throw new Error(`Article not found: ${slug}`);
}
---

<Layout title={article.data.title}>
  <div class="markdown-body">
    <article>
      <h1>{article.data.title}</h1>
      <p class="text-gray-600 text-sm mb-8">
        Published on {new Date(article.data.publishedAt).toLocaleDateString()}
      </p>
      <div set:html={article.body.html}></div>
    </article>
  </div>
</Layout>
